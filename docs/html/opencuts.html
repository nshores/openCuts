<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>openCuts.opencuts API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>openCuts.opencuts</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import logging
import sys
from datetime import datetime
import requests
import uuid
import os

&#34;&#34;&#34; openCuts - an opensource library for interacting with Regis Properties Salons. Currentley supports Supercuts but in the future will support other Regis properties that use the same API&#39;s. 
    - User is expected to include the regis_api_key, regis_booking_api_key and salon_id
    - Features:
        - Get Salon Services
        - Get Therapists working at store at a specified date
        - Get people on schedule for the specified salon and date
        - Get available time slots for combination of stylist and service
        - schedule appointment (reserve slot)
        - search for a user
        - create a user
        - cancel appointment for user
        - see upcoming appointments for user
        - Support for all regis pos_types
&#34;&#34;&#34;
logging.basicConfig(
    level=logging.INFO, format=&#34;%(asctime)s - %(levelname)s - %(message)s&#34;
)

POS_TYPES = [
    &#34;Zenoti&#34;,
    &#34;Supersalon&#34;,
    &#34;opensalonpro&#34;,
]  # Only Zenoti supported for now. Other POS_TYPES require calling api-booking.regiscorp.com instead of zentoi directly


BASE_REGIS_API_URL = &#34;https://api.regiscorp.com&#34;
BASE_REGIS_BOOKING_API_URL = &#34;https://api-booking.regiscorp.com/v1/&#34;
ZENOTI_API_URL = &#34;https://api.zenoti.com/v1/&#34;


class RegisSalon:
    def __init__(self, salon_id, regis_api_key, regis_boking_api_key):
        &#34;&#34;&#34;
        Initialize a new Salon instance with specific salon ID and Regis API key.

        Args:
            salon_id (str): The unique identifier for a specific salon.
            regis_api_key (str): API key used for authorization with Regis properties&#39; services.

        This method initializes the Salon instance with the provided salon ID and Regis API key. It also sets default values for various instance properties such as API URLs, store ID, POS type, available services, and the current date.
        &#34;&#34;&#34;
        self.salon_id = salon_id
        self.regis_api_key = regis_api_key
        self.regis_api_booking_key = regis_boking_api_key
        self.base_regis_api_url = BASE_REGIS_API_URL
        self.base_regis_booking_api_url = BASE_REGIS_BOOKING_API_URL
        self.zenoti_api_url = ZENOTI_API_URL
        self.store_id = None
        self.pos_type = None
        self.store_services = None
        self.today_date = datetime.now().strftime(&#34;%Y-%m-%d&#34;)
        self.therapists = []
        self.storeaddress = None
        self.storename = None
        self.storephone = None

        # UUID Logic
        # Generate and store UUID only once
        if not os.path.exists(&#34;device_uuid&#34;):
            with open(&#34;device_uuid&#34;, &#34;w&#34;) as f:
                device_uuid = uuid.uuid4()
                self.device_uuid_str = str(
                    device_uuid
                )  # Convert the UUID object to a string
                f.write(self.device_uuid_str)
        f = open(&#34;device_uuid&#34;, &#34;r&#34;)
        self.device_uuid_str = str(f.read())
        f.close()

    def get_salon(self):
        &#34;&#34;&#34;
        Retrieve salon information using its unique identifier and set essential details.

        This method makes an API request to retrieve salon information, including the Zenoti API key, store ID, and POS type, using the salon&#39;s unique identifier.

        Returns:
            tuple: A tuple containing the Zenoti API key, store ID, and POS type if the request is successful, otherwise None.
        &#34;&#34;&#34;
        headers = {
            &#34;Authorization&#34;: self.regis_api_key,
        }
        params = {&#34;salon-number&#34;: self.salon_id}
        logging.info(&#34;Getting Zenoti API Key&#34;)
        request_url = self.base_regis_api_url + &#34;/sis/api/salon?&#34; + self.salon_id
        try:
            response = requests.get(request_url, headers=headers, params=params)
            self.zenoti_api_key = response.json().get(&#34;zenoti_api_key&#34;, None)
            self.store_id = response.json().get(&#34;zenoti_id&#34;, None)
            self.pos_type = response.json().get(&#34;pos_type&#34;, None)
            self.storeaddress = response.json().get(&#34;address2&#34;, None)
            self.storename = response.json().get(&#34;name&#34;, None)
            self.storephone = response.json().get(&#34;phone_number&#34;, None)
        except Exception as error:
            logging.error(&#34;Error getting Zenoti API Key %s&#34;, error)
            return None
        # Get some additonal info if this is a differnet POS system
        if self.pos_type.lower() != &#34;zenoti&#34;:
            headers = {
                &#34;x-api-key&#34;: self.regis_api_booking_key,
            }
            payload = {
                &#34;salonId&#34;: self.salon_id,
                &#34;siteId&#34;: &#34;1&#34;,
            }
            logging.info(&#34;Getting Store Details&#34;)
            request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
            try:
                response = requests.post(request_url, headers=headers, json=payload)
                response = response.json()
                self.storeaddress = response[&#34;Salon&#34;][&#34;address&#34;]
                self.storename = response[&#34;Salon&#34;][&#34;name&#34;]
                self.storephone = response[&#34;Salon&#34;][&#34;phonenumber&#34;]
                self.storephone = self.storephone.replace(&#34;-&#34;, &#34;&#34;)
            except Exception as error:
                logging.error(&#34;Error Store Details %s&#34;, error)
                return None

    def get_salon_services(self):
        &#34;&#34;&#34;
        Retrieve salon services

        &#34;&#34;&#34;
        if self.pos_type.lower() == &#34;zenoti&#34;:
            headers = {
                &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
            }
            logging.info(&#34;Getting Salon Services&#34;)
            request_url = (
                self.zenoti_api_url
                + f&#34;centers/{self.store_id}/services?catalog_enabled=true&amp;expand=additional_info&amp;expand=catalog_info&amp;size=100&amp;0=us&#34;
            )
            try:
                response = requests.get(request_url, headers=headers)
                self.store_services = response.json().get(&#34;services&#34;, None)
            except Exception as error:
                logging.error(&#34;Error Geting Store Services %s&#34;, error)
                return None
            return self.store_services
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
        logging.info(&#34;Getting Salon Services&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.store_services = response.json().get(&#34;Services&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Services %s&#34;, error)
            return None
        return self.store_services

    def get_therapists_working(self):
        if self.pos_type.lower() == &#34;zenoti&#34;:
            params = {&#34;date&#34;: self.today_date}
            headers = {
                &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
            }
            logging.info(&#34;Getting Salon Therapists&#34;)
            request_url = self.zenoti_api_url + f&#34;centers/{self.store_id}/therapists&#34;
            try:
                response = requests.get(request_url, headers=headers, params=params)
                self.therapists = response.json().get(&#34;therapists&#34;, None)
            except Exception as error:
                logging.error(&#34;Error Geting Store therapists %s&#34;, error)
                return None
            return self.therapists
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
        logging.info(&#34;Getting Salon Stylists&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.therapists = response.json().get(&#34;Stylists&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Stylists %s&#34;, error)
            return None
        return self.therapists

    def get_attendance(self, name):
        for person in self.therapists:
            # check if the name key is present
            if person[&#34;personal_info&#34;][&#34;name&#34;].lower() == name.lower():
                employee_id = person[&#34;id&#34;]
        params = {
            &#34;center_id&#34;: self.store_id,
            &#34;start_date&#34;: self.today_date,
            &#34;end_date&#34;: self.today_date,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Therapist Attendance&#34;)
        request_url = self.zenoti_api_url + f&#34;employees/{employee_id}/attendance&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            self.attendance = response.json().get(&#34;attendance&#34;, None)
            self.attendance_total = response.json().get(&#34;total_records&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Therapist Attendance %s&#34;, error)
            return None
        return self.attendance, self.attendance_total

    def find_stylist_by_name(self, stylist_name):
        for stylist in self.therapists:
            if &#34;personal_info&#34; in stylist:
                if (
                    stylist[&#34;personal_info&#34;][&#34;first_name&#34;].lower()
                    == stylist_name.lower()
                ):
                    return stylist
            else:
                stylist[&#34;name&#34;].lower() == stylist_name.lower()
                return stylist
        return None  # If no stylist found with that name

    def find_service_by_name(self, service_name):
        for service in self.store_services:
            if &#34;catalog_info&#34; in service:
                if (
                    service[&#34;catalog_info&#34;][&#34;display_name&#34;].lower()
                    == service_name.lower()
                ):
                    return service
            else:
                for category in self.store_services:
                    for service in category[&#34;services&#34;]:
                        if service[&#34;service&#34;] == service_name:
                            return service[&#34;id&#34;]
                return None
        return None  # If no service found with that name

    # https://docs.zenoti.com/reference/create-a-service-booking
    def create_service_booking(self, service, stylist, guest_id=None):
        &#34;&#34;&#34;This method expects a service and stylist object.
        It will return a unique service ID that can be passed to get_booking_slot
        to get an object containing available booking slots for the combination of an service, stylist, and location.
        &#34;&#34;&#34;
        # This defaults to &#34;next available&#34; if no stylist is defined.
        if not stylist:
            stylist = {}
            stylist[&#34;personal_info&#34;] = {}
            stylist[&#34;personal_info&#34;][&#34;gender&#34;] = &#34;0&#34;
            stylist[&#34;id&#34;] = &#34;&#34;
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;date&#34;: self.today_date,
            &#34;is_only_catalog_employes&#34;: True,
            &#34;center_id&#34;: self.store_id,
            &#34;guests&#34;: [
                {
                    # Guest ID should be set when ready to mark a reservation.
                    &#34;id&#34;: guest_id,
                    &#34;items&#34;: [
                        {
                            &#34;item&#34;: {&#34;id&#34;: service[&#34;id&#34;]},
                            &#34;therapist&#34;: {
                                &#34;id&#34;: stylist[&#34;id&#34;],
                                &#34;Gender&#34;: stylist[&#34;personal_info&#34;][&#34;gender&#34;],
                            },
                        }
                    ],
                }
            ],
        }
        logging.info(&#34;Getting Service booking_id&#34;)
        request_url = self.zenoti_api_url + &#34;bookings&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            booking_id = response.json()
        except Exception as error:
            logging.error(&#34;Error Getting service_id %s&#34;, error)
            return None
        return booking_id

    # Take your {booking_id} and GET  https: //api.zenoti.com/v1/bookings/{slot_id}/slots?0=us
    def get_booking_slot(self, slot_id):
        slot_id = slot_id[&#34;id&#34;]
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Booking Slot&#34;)
        request_url = self.zenoti_api_url + f&#34;bookings/{slot_id}/slots&#34;
        try:
            response = requests.get(request_url, headers=headers)
            booking_slots = response.json()
            if len(booking_slots[&#34;slots&#34;]) &lt; 1:
                print(&#34;No Booking slots available for the time and stylist requested&#34;)
                booking_slots = 0
                return {}
            return booking_slots
        except Exception as error:
            logging.error(&#34;Error Getting booking_slots %s&#34;, error)
            return None

    # reserve a slot
    def reserve_selected_slot(self, selected_slot, booking_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {&#34;slot_time&#34;: selected_slot[&#34;Time&#34;]}
        request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/reserve&#34;
        logging.info(&#34;Trying to reserve your slot&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            response = response.json()
        except Exception as error:
            logging.error(&#34;Error Reserving Slot %s&#34;, error)
            return None
        return response

    # Confirm your slot
    def confirm_selected_slot(self, booking_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;notes&#34;: &#34;&#34;,
            &#34;group_name&#34;: &#34;&#34;,
        }
        request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/confirm&#34;
        logging.info(&#34;Trying to confirm your slot&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            response = response.json()
        except Exception as error:
            logging.error(&#34;Error Confirming Slot %s&#34;, error)
            return None
        return response

    # retrive guest details to get a guest ID or create a new one
    # https://docs.zenoti.com/reference/search-for-a-guest
    def retrive_guest_detail(self, first_name=None, last_name=None, phone=None):
        params = {
            &#34;center_id&#34;: self.store_id,
            &#34;first_name&#34;: first_name,
            &#34;last_name&#34;: last_name,
            &#34;phone&#34;: phone,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Retriving Guest Detail&#34;)
        request_url = self.zenoti_api_url + &#34;guests/search&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            guest = response.json()
            if len(guest[&#34;guests&#34;]) &lt; 1:
                print(&#34;No guest records returned&#34;)
                return {}
            return guest[&#34;guests&#34;][
                -1
            ]  # Sometimes guests have multiple records so just return the latest one
        except Exception as error:
            logging.error(&#34;Error Getting Guest Detail %s&#34;, error)
            return None

    # Create a user account
    def create_account(self, first_name, last_name, phone_number):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;center_id&#34;: self.store_id,
            &#34;personal_info&#34;: {
                &#34;first_name&#34;: first_name,
                &#34;last_name&#34;: last_name,
                &#34;mobile_phone&#34;: {
                    &#34;country_code&#34;: 225,  # America
                    &#34;number&#34;: phone_number,
                },
                &#34;email&#34;: &#34;&#34;,
                &#34;gender&#34;: -1,
            },
            &#34;preferences&#34;: {
                &#34;receive_transactional_email&#34;: True,  # Get upadtes about your appointment via email
                &#34;receive_transactional_sms&#34;: True,  # Get upadtes about your appointment via sms
                &#34;receive_marketing_email&#34;: False,  # Don&#39;t spam me
                &#34;receive_marketing_sms&#34;: False,  # more spam
            },
        }
        request_url = self.zenoti_api_url + &#34;guests&#34;
        logging.info(&#34;Trying to Create an account&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            account = response.json()
        except Exception as error:
            logging.error(&#34;Creating Account %s&#34;, error)
            return None
        return account

    # Check appointments for user
    def get_appointments(self, guest_id, start_date=None, end_date=None):
        if start_date is None:
            start_date = self.today_date
        if end_date is None:
            end_date = self.today_date
        params = {
            &#34;start_date&#34;: start_date,
            &#34;end_date&#34;: end_date,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Retriving Guest Appointments&#34;)
        request_url = self.zenoti_api_url + f&#34;guests/{guest_id}/appointments&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            appointments = response.json()
            if len(appointments[&#34;appointments&#34;]) &lt; 1:
                # print(&#34;No guest appointments returned&#34;)
                return {}
            return appointments[&#34;appointments&#34;]
        except Exception as error:
            logging.error(&#34;Error Getting Guest Appointments %s&#34;, error)
            return None

    # cancel appointsments for user
    def cancel_appointment(self, invoice_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;comments&#34;: &#34;Cannot Attend&#34;,
        }
        logging.info(&#34;Cancelling Appointment&#34;)
        request_url = self.zenoti_api_url + f&#34;invoices/{invoice_id}/cancel&#34;
        try:
            response = requests.put(request_url, headers=headers, json=payload)
            response = response.json()
            return response
        except Exception as error:
            logging.error(&#34;Error Cancelling Appointment %s&#34;, error)
            return None

    # for the service you want, who&#39;s availble?
    def get_availability_of_salon(self, serviceid: str):
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;salonId&#34;: self.salon_id,
            &#34;serviceIds&#34;: serviceid,
            &#34;siteId&#34;: &#34;1&#34;,
            &#34;date&#34;: datetime.now().strftime(&#34;%Y%m%d&#34;),
        }
        logging.info(&#34;Getting Salon Availability&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getavailabilityofsalon&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.availability = response.json()
        except Exception as error:
            logging.error(&#34;Error Geting Store availability %s&#34;, error)
            return None
        return self.availability

    def add_check_in(
        self,
        firstname: str,
        lastname: str,
        phonenumber: str,
        serviceid: str,
        services: list,
        stylistid: str,
        stylistname: str,
        time: str,
        emailaddress: str,
    ):
        &#34;&#34;&#34;
        Add a check-in for a customer at a salon. The sourceID is temporary value generated by a function in the browser normally, but
        here we are using a static value which seems to work fine.

        Args:
            firstname (str): The first name of the customer.
            lastname (str): The last name of the customer.
            phonenumber (str): The phone number of the customer.
            serviceid (str): The ID of the service being availed.
            services (list): A list of services being availed.
            stylistid (str): The ID of the stylist chosen.
            stylistname (str): The name of the stylist chosen.
            time (str): The time of the appointment.
            date (datetime): The date of the appointment.
            emailaddress (str): The email address of the customer.

        Returns:
            checkin_reuslt[Dict[]]: A dict containning the results of the checkin.
            checkin_id(str): A strin containing a unique checkin_id.


        Raises:
            Exception: If there&#39;s an error in the API request.

        This function sends a request to the salon&#39;s booking system to add a check-in with the provided details.
        &#34;&#34;&#34;
        device_uuid = &#34;SC-W-&#34; + self.device_uuid_str
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;firstName&#34;: firstname,
            &#34;lastName&#34;: lastname,
            &#34;phoneNumber&#34;: phonenumber,
            &#34;salonId&#34;: int(self.salon_id),
            &#34;serviceId&#34;: serviceid,
            &#34;services&#34;: services,
            &#34;siteId&#34;: &#34;1&#34;,
            &#34;source&#34;: &#34;SCWEB&#34;,
            &#34;sourceId&#34;: device_uuid,
            &#34;storeAddress&#34;: self.storeaddress,
            &#34;storeName&#34;: self.storename,
            &#34;storePhone&#34;: self.storephone,
            &#34;stylistId&#34;: str(stylistid),
            &#34;stylistName&#34;: stylistname,
            &#34;time&#34;: time,
            &#34;date&#34;: int(datetime.now().strftime(&#34;%Y%m%d&#34;)),
            &#34;profileId&#34;: None,
            &#34;emailAddress&#34;: emailaddress,
            &#34;gender&#34;: 0,
        }
        logging.info(&#34;Checking in&#34;)
        request_url = self.base_regis_booking_api_url + &#34;addcheckin&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            checkin = response.json()
            checkin_result = response.json().get(&#34;apiResult&#34;, None)
            checkin_id = response.json().get(&#34;checkinId&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Checking in %s&#34;, error)
            return None
        return checkin_result, checkin_id

    def get_check_in_by_source(self):
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;sourceId&#34;: &#34;SC-W-&#34; + self.device_uuid_str,
            &#34;profileId&#34;: None,
        }
        logging.info(&#34;Getting Checkins&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getcheckinbysource&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            checkins = response.json()
        except Exception as error:
            logging.error(&#34;Error Geting Checkins %s&#34;, error)
            return None
        return checkins

    def cancel_checkin(self, checkinid):
        &#34;&#34;&#34;Cancels a checkin using the api-booking regis API

        Args:
            checkinid (_type_): _description_

        Returns:
            _type_: _description_
        &#34;&#34;&#34;
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;checkinId&#34;: checkinid,
        }
        logging.info(&#34;Cancelling checkin&#34;)
        request_url = self.base_regis_booking_api_url + &#34;cancelcheckin&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            cancel_checkin = response.json()
        except Exception as error:
            logging.error(&#34;Error Cancelling Checkin %s&#34;, error)
            return None
        return cancel_checkin</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="openCuts.opencuts.RegisSalon"><code class="flex name class">
<span>class <span class="ident">RegisSalon</span></span>
<span>(</span><span>salon_id, regis_api_key, regis_boking_api_key)</span>
</code></dt>
<dd>
<div class="desc"><p>Initialize a new Salon instance with specific salon ID and Regis API key.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>salon_id</code></strong> :&ensp;<code>str</code></dt>
<dd>The unique identifier for a specific salon.</dd>
<dt><strong><code>regis_api_key</code></strong> :&ensp;<code>str</code></dt>
<dd>API key used for authorization with Regis properties' services.</dd>
</dl>
<p>This method initializes the Salon instance with the provided salon ID and Regis API key. It also sets default values for various instance properties such as API URLs, store ID, POS type, available services, and the current date.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RegisSalon:
    def __init__(self, salon_id, regis_api_key, regis_boking_api_key):
        &#34;&#34;&#34;
        Initialize a new Salon instance with specific salon ID and Regis API key.

        Args:
            salon_id (str): The unique identifier for a specific salon.
            regis_api_key (str): API key used for authorization with Regis properties&#39; services.

        This method initializes the Salon instance with the provided salon ID and Regis API key. It also sets default values for various instance properties such as API URLs, store ID, POS type, available services, and the current date.
        &#34;&#34;&#34;
        self.salon_id = salon_id
        self.regis_api_key = regis_api_key
        self.regis_api_booking_key = regis_boking_api_key
        self.base_regis_api_url = BASE_REGIS_API_URL
        self.base_regis_booking_api_url = BASE_REGIS_BOOKING_API_URL
        self.zenoti_api_url = ZENOTI_API_URL
        self.store_id = None
        self.pos_type = None
        self.store_services = None
        self.today_date = datetime.now().strftime(&#34;%Y-%m-%d&#34;)
        self.therapists = []
        self.storeaddress = None
        self.storename = None
        self.storephone = None

        # UUID Logic
        # Generate and store UUID only once
        if not os.path.exists(&#34;device_uuid&#34;):
            with open(&#34;device_uuid&#34;, &#34;w&#34;) as f:
                device_uuid = uuid.uuid4()
                self.device_uuid_str = str(
                    device_uuid
                )  # Convert the UUID object to a string
                f.write(self.device_uuid_str)
        f = open(&#34;device_uuid&#34;, &#34;r&#34;)
        self.device_uuid_str = str(f.read())
        f.close()

    def get_salon(self):
        &#34;&#34;&#34;
        Retrieve salon information using its unique identifier and set essential details.

        This method makes an API request to retrieve salon information, including the Zenoti API key, store ID, and POS type, using the salon&#39;s unique identifier.

        Returns:
            tuple: A tuple containing the Zenoti API key, store ID, and POS type if the request is successful, otherwise None.
        &#34;&#34;&#34;
        headers = {
            &#34;Authorization&#34;: self.regis_api_key,
        }
        params = {&#34;salon-number&#34;: self.salon_id}
        logging.info(&#34;Getting Zenoti API Key&#34;)
        request_url = self.base_regis_api_url + &#34;/sis/api/salon?&#34; + self.salon_id
        try:
            response = requests.get(request_url, headers=headers, params=params)
            self.zenoti_api_key = response.json().get(&#34;zenoti_api_key&#34;, None)
            self.store_id = response.json().get(&#34;zenoti_id&#34;, None)
            self.pos_type = response.json().get(&#34;pos_type&#34;, None)
            self.storeaddress = response.json().get(&#34;address2&#34;, None)
            self.storename = response.json().get(&#34;name&#34;, None)
            self.storephone = response.json().get(&#34;phone_number&#34;, None)
        except Exception as error:
            logging.error(&#34;Error getting Zenoti API Key %s&#34;, error)
            return None
        # Get some additonal info if this is a differnet POS system
        if self.pos_type.lower() != &#34;zenoti&#34;:
            headers = {
                &#34;x-api-key&#34;: self.regis_api_booking_key,
            }
            payload = {
                &#34;salonId&#34;: self.salon_id,
                &#34;siteId&#34;: &#34;1&#34;,
            }
            logging.info(&#34;Getting Store Details&#34;)
            request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
            try:
                response = requests.post(request_url, headers=headers, json=payload)
                response = response.json()
                self.storeaddress = response[&#34;Salon&#34;][&#34;address&#34;]
                self.storename = response[&#34;Salon&#34;][&#34;name&#34;]
                self.storephone = response[&#34;Salon&#34;][&#34;phonenumber&#34;]
                self.storephone = self.storephone.replace(&#34;-&#34;, &#34;&#34;)
            except Exception as error:
                logging.error(&#34;Error Store Details %s&#34;, error)
                return None

    def get_salon_services(self):
        &#34;&#34;&#34;
        Retrieve salon services

        &#34;&#34;&#34;
        if self.pos_type.lower() == &#34;zenoti&#34;:
            headers = {
                &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
            }
            logging.info(&#34;Getting Salon Services&#34;)
            request_url = (
                self.zenoti_api_url
                + f&#34;centers/{self.store_id}/services?catalog_enabled=true&amp;expand=additional_info&amp;expand=catalog_info&amp;size=100&amp;0=us&#34;
            )
            try:
                response = requests.get(request_url, headers=headers)
                self.store_services = response.json().get(&#34;services&#34;, None)
            except Exception as error:
                logging.error(&#34;Error Geting Store Services %s&#34;, error)
                return None
            return self.store_services
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
        logging.info(&#34;Getting Salon Services&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.store_services = response.json().get(&#34;Services&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Services %s&#34;, error)
            return None
        return self.store_services

    def get_therapists_working(self):
        if self.pos_type.lower() == &#34;zenoti&#34;:
            params = {&#34;date&#34;: self.today_date}
            headers = {
                &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
            }
            logging.info(&#34;Getting Salon Therapists&#34;)
            request_url = self.zenoti_api_url + f&#34;centers/{self.store_id}/therapists&#34;
            try:
                response = requests.get(request_url, headers=headers, params=params)
                self.therapists = response.json().get(&#34;therapists&#34;, None)
            except Exception as error:
                logging.error(&#34;Error Geting Store therapists %s&#34;, error)
                return None
            return self.therapists
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
        logging.info(&#34;Getting Salon Stylists&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.therapists = response.json().get(&#34;Stylists&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Stylists %s&#34;, error)
            return None
        return self.therapists

    def get_attendance(self, name):
        for person in self.therapists:
            # check if the name key is present
            if person[&#34;personal_info&#34;][&#34;name&#34;].lower() == name.lower():
                employee_id = person[&#34;id&#34;]
        params = {
            &#34;center_id&#34;: self.store_id,
            &#34;start_date&#34;: self.today_date,
            &#34;end_date&#34;: self.today_date,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Therapist Attendance&#34;)
        request_url = self.zenoti_api_url + f&#34;employees/{employee_id}/attendance&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            self.attendance = response.json().get(&#34;attendance&#34;, None)
            self.attendance_total = response.json().get(&#34;total_records&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Therapist Attendance %s&#34;, error)
            return None
        return self.attendance, self.attendance_total

    def find_stylist_by_name(self, stylist_name):
        for stylist in self.therapists:
            if &#34;personal_info&#34; in stylist:
                if (
                    stylist[&#34;personal_info&#34;][&#34;first_name&#34;].lower()
                    == stylist_name.lower()
                ):
                    return stylist
            else:
                stylist[&#34;name&#34;].lower() == stylist_name.lower()
                return stylist
        return None  # If no stylist found with that name

    def find_service_by_name(self, service_name):
        for service in self.store_services:
            if &#34;catalog_info&#34; in service:
                if (
                    service[&#34;catalog_info&#34;][&#34;display_name&#34;].lower()
                    == service_name.lower()
                ):
                    return service
            else:
                for category in self.store_services:
                    for service in category[&#34;services&#34;]:
                        if service[&#34;service&#34;] == service_name:
                            return service[&#34;id&#34;]
                return None
        return None  # If no service found with that name

    # https://docs.zenoti.com/reference/create-a-service-booking
    def create_service_booking(self, service, stylist, guest_id=None):
        &#34;&#34;&#34;This method expects a service and stylist object.
        It will return a unique service ID that can be passed to get_booking_slot
        to get an object containing available booking slots for the combination of an service, stylist, and location.
        &#34;&#34;&#34;
        # This defaults to &#34;next available&#34; if no stylist is defined.
        if not stylist:
            stylist = {}
            stylist[&#34;personal_info&#34;] = {}
            stylist[&#34;personal_info&#34;][&#34;gender&#34;] = &#34;0&#34;
            stylist[&#34;id&#34;] = &#34;&#34;
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;date&#34;: self.today_date,
            &#34;is_only_catalog_employes&#34;: True,
            &#34;center_id&#34;: self.store_id,
            &#34;guests&#34;: [
                {
                    # Guest ID should be set when ready to mark a reservation.
                    &#34;id&#34;: guest_id,
                    &#34;items&#34;: [
                        {
                            &#34;item&#34;: {&#34;id&#34;: service[&#34;id&#34;]},
                            &#34;therapist&#34;: {
                                &#34;id&#34;: stylist[&#34;id&#34;],
                                &#34;Gender&#34;: stylist[&#34;personal_info&#34;][&#34;gender&#34;],
                            },
                        }
                    ],
                }
            ],
        }
        logging.info(&#34;Getting Service booking_id&#34;)
        request_url = self.zenoti_api_url + &#34;bookings&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            booking_id = response.json()
        except Exception as error:
            logging.error(&#34;Error Getting service_id %s&#34;, error)
            return None
        return booking_id

    # Take your {booking_id} and GET  https: //api.zenoti.com/v1/bookings/{slot_id}/slots?0=us
    def get_booking_slot(self, slot_id):
        slot_id = slot_id[&#34;id&#34;]
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Booking Slot&#34;)
        request_url = self.zenoti_api_url + f&#34;bookings/{slot_id}/slots&#34;
        try:
            response = requests.get(request_url, headers=headers)
            booking_slots = response.json()
            if len(booking_slots[&#34;slots&#34;]) &lt; 1:
                print(&#34;No Booking slots available for the time and stylist requested&#34;)
                booking_slots = 0
                return {}
            return booking_slots
        except Exception as error:
            logging.error(&#34;Error Getting booking_slots %s&#34;, error)
            return None

    # reserve a slot
    def reserve_selected_slot(self, selected_slot, booking_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {&#34;slot_time&#34;: selected_slot[&#34;Time&#34;]}
        request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/reserve&#34;
        logging.info(&#34;Trying to reserve your slot&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            response = response.json()
        except Exception as error:
            logging.error(&#34;Error Reserving Slot %s&#34;, error)
            return None
        return response

    # Confirm your slot
    def confirm_selected_slot(self, booking_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;notes&#34;: &#34;&#34;,
            &#34;group_name&#34;: &#34;&#34;,
        }
        request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/confirm&#34;
        logging.info(&#34;Trying to confirm your slot&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            response = response.json()
        except Exception as error:
            logging.error(&#34;Error Confirming Slot %s&#34;, error)
            return None
        return response

    # retrive guest details to get a guest ID or create a new one
    # https://docs.zenoti.com/reference/search-for-a-guest
    def retrive_guest_detail(self, first_name=None, last_name=None, phone=None):
        params = {
            &#34;center_id&#34;: self.store_id,
            &#34;first_name&#34;: first_name,
            &#34;last_name&#34;: last_name,
            &#34;phone&#34;: phone,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Retriving Guest Detail&#34;)
        request_url = self.zenoti_api_url + &#34;guests/search&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            guest = response.json()
            if len(guest[&#34;guests&#34;]) &lt; 1:
                print(&#34;No guest records returned&#34;)
                return {}
            return guest[&#34;guests&#34;][
                -1
            ]  # Sometimes guests have multiple records so just return the latest one
        except Exception as error:
            logging.error(&#34;Error Getting Guest Detail %s&#34;, error)
            return None

    # Create a user account
    def create_account(self, first_name, last_name, phone_number):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;center_id&#34;: self.store_id,
            &#34;personal_info&#34;: {
                &#34;first_name&#34;: first_name,
                &#34;last_name&#34;: last_name,
                &#34;mobile_phone&#34;: {
                    &#34;country_code&#34;: 225,  # America
                    &#34;number&#34;: phone_number,
                },
                &#34;email&#34;: &#34;&#34;,
                &#34;gender&#34;: -1,
            },
            &#34;preferences&#34;: {
                &#34;receive_transactional_email&#34;: True,  # Get upadtes about your appointment via email
                &#34;receive_transactional_sms&#34;: True,  # Get upadtes about your appointment via sms
                &#34;receive_marketing_email&#34;: False,  # Don&#39;t spam me
                &#34;receive_marketing_sms&#34;: False,  # more spam
            },
        }
        request_url = self.zenoti_api_url + &#34;guests&#34;
        logging.info(&#34;Trying to Create an account&#34;)
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            account = response.json()
        except Exception as error:
            logging.error(&#34;Creating Account %s&#34;, error)
            return None
        return account

    # Check appointments for user
    def get_appointments(self, guest_id, start_date=None, end_date=None):
        if start_date is None:
            start_date = self.today_date
        if end_date is None:
            end_date = self.today_date
        params = {
            &#34;start_date&#34;: start_date,
            &#34;end_date&#34;: end_date,
        }
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Retriving Guest Appointments&#34;)
        request_url = self.zenoti_api_url + f&#34;guests/{guest_id}/appointments&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            appointments = response.json()
            if len(appointments[&#34;appointments&#34;]) &lt; 1:
                # print(&#34;No guest appointments returned&#34;)
                return {}
            return appointments[&#34;appointments&#34;]
        except Exception as error:
            logging.error(&#34;Error Getting Guest Appointments %s&#34;, error)
            return None

    # cancel appointsments for user
    def cancel_appointment(self, invoice_id):
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        payload = {
            &#34;comments&#34;: &#34;Cannot Attend&#34;,
        }
        logging.info(&#34;Cancelling Appointment&#34;)
        request_url = self.zenoti_api_url + f&#34;invoices/{invoice_id}/cancel&#34;
        try:
            response = requests.put(request_url, headers=headers, json=payload)
            response = response.json()
            return response
        except Exception as error:
            logging.error(&#34;Error Cancelling Appointment %s&#34;, error)
            return None

    # for the service you want, who&#39;s availble?
    def get_availability_of_salon(self, serviceid: str):
        # Handle a non-zenoti type store
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;salonId&#34;: self.salon_id,
            &#34;serviceIds&#34;: serviceid,
            &#34;siteId&#34;: &#34;1&#34;,
            &#34;date&#34;: datetime.now().strftime(&#34;%Y%m%d&#34;),
        }
        logging.info(&#34;Getting Salon Availability&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getavailabilityofsalon&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            self.availability = response.json()
        except Exception as error:
            logging.error(&#34;Error Geting Store availability %s&#34;, error)
            return None
        return self.availability

    def add_check_in(
        self,
        firstname: str,
        lastname: str,
        phonenumber: str,
        serviceid: str,
        services: list,
        stylistid: str,
        stylistname: str,
        time: str,
        emailaddress: str,
    ):
        &#34;&#34;&#34;
        Add a check-in for a customer at a salon. The sourceID is temporary value generated by a function in the browser normally, but
        here we are using a static value which seems to work fine.

        Args:
            firstname (str): The first name of the customer.
            lastname (str): The last name of the customer.
            phonenumber (str): The phone number of the customer.
            serviceid (str): The ID of the service being availed.
            services (list): A list of services being availed.
            stylistid (str): The ID of the stylist chosen.
            stylistname (str): The name of the stylist chosen.
            time (str): The time of the appointment.
            date (datetime): The date of the appointment.
            emailaddress (str): The email address of the customer.

        Returns:
            checkin_reuslt[Dict[]]: A dict containning the results of the checkin.
            checkin_id(str): A strin containing a unique checkin_id.


        Raises:
            Exception: If there&#39;s an error in the API request.

        This function sends a request to the salon&#39;s booking system to add a check-in with the provided details.
        &#34;&#34;&#34;
        device_uuid = &#34;SC-W-&#34; + self.device_uuid_str
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;firstName&#34;: firstname,
            &#34;lastName&#34;: lastname,
            &#34;phoneNumber&#34;: phonenumber,
            &#34;salonId&#34;: int(self.salon_id),
            &#34;serviceId&#34;: serviceid,
            &#34;services&#34;: services,
            &#34;siteId&#34;: &#34;1&#34;,
            &#34;source&#34;: &#34;SCWEB&#34;,
            &#34;sourceId&#34;: device_uuid,
            &#34;storeAddress&#34;: self.storeaddress,
            &#34;storeName&#34;: self.storename,
            &#34;storePhone&#34;: self.storephone,
            &#34;stylistId&#34;: str(stylistid),
            &#34;stylistName&#34;: stylistname,
            &#34;time&#34;: time,
            &#34;date&#34;: int(datetime.now().strftime(&#34;%Y%m%d&#34;)),
            &#34;profileId&#34;: None,
            &#34;emailAddress&#34;: emailaddress,
            &#34;gender&#34;: 0,
        }
        logging.info(&#34;Checking in&#34;)
        request_url = self.base_regis_booking_api_url + &#34;addcheckin&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            checkin = response.json()
            checkin_result = response.json().get(&#34;apiResult&#34;, None)
            checkin_id = response.json().get(&#34;checkinId&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Checking in %s&#34;, error)
            return None
        return checkin_result, checkin_id

    def get_check_in_by_source(self):
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;sourceId&#34;: &#34;SC-W-&#34; + self.device_uuid_str,
            &#34;profileId&#34;: None,
        }
        logging.info(&#34;Getting Checkins&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getcheckinbysource&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            checkins = response.json()
        except Exception as error:
            logging.error(&#34;Error Geting Checkins %s&#34;, error)
            return None
        return checkins

    def cancel_checkin(self, checkinid):
        &#34;&#34;&#34;Cancels a checkin using the api-booking regis API

        Args:
            checkinid (_type_): _description_

        Returns:
            _type_: _description_
        &#34;&#34;&#34;
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;checkinId&#34;: checkinid,
        }
        logging.info(&#34;Cancelling checkin&#34;)
        request_url = self.base_regis_booking_api_url + &#34;cancelcheckin&#34;
        try:
            response = requests.post(request_url, json=payload, headers=headers)
            cancel_checkin = response.json()
        except Exception as error:
            logging.error(&#34;Error Cancelling Checkin %s&#34;, error)
            return None
        return cancel_checkin</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="openCuts.opencuts.RegisSalon.add_check_in"><code class="name flex">
<span>def <span class="ident">add_check_in</span></span>(<span>self, firstname:str, lastname:str, phonenumber:str, serviceid:str, services:list, stylistid:str, stylistname:str, time:str, emailaddress:str)</span>
</code></dt>
<dd>
<div class="desc"><p>Add a check-in for a customer at a salon. The sourceID is temporary value generated by a function in the browser normally, but
here we are using a static value which seems to work fine.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>firstname</code></strong> :&ensp;<code>str</code></dt>
<dd>The first name of the customer.</dd>
<dt><strong><code>lastname</code></strong> :&ensp;<code>str</code></dt>
<dd>The last name of the customer.</dd>
<dt><strong><code>phonenumber</code></strong> :&ensp;<code>str</code></dt>
<dd>The phone number of the customer.</dd>
<dt><strong><code>serviceid</code></strong> :&ensp;<code>str</code></dt>
<dd>The ID of the service being availed.</dd>
<dt><strong><code>services</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of services being availed.</dd>
<dt><strong><code>stylistid</code></strong> :&ensp;<code>str</code></dt>
<dd>The ID of the stylist chosen.</dd>
<dt><strong><code>stylistname</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the stylist chosen.</dd>
<dt><strong><code>time</code></strong> :&ensp;<code>str</code></dt>
<dd>The time of the appointment.</dd>
<dt><strong><code>date</code></strong> :&ensp;<code>datetime</code></dt>
<dd>The date of the appointment.</dd>
<dt><strong><code>emailaddress</code></strong> :&ensp;<code>str</code></dt>
<dd>The email address of the customer.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>checkin_reuslt[Dict[]]</code></dt>
<dd>A dict containning the results of the checkin.</dd>
</dl>
<p>checkin_id(str): A strin containing a unique checkin_id.</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>Exception</code></dt>
<dd>If there's an error in the API request.</dd>
</dl>
<p>This function sends a request to the salon's booking system to add a check-in with the provided details.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_check_in(
    self,
    firstname: str,
    lastname: str,
    phonenumber: str,
    serviceid: str,
    services: list,
    stylistid: str,
    stylistname: str,
    time: str,
    emailaddress: str,
):
    &#34;&#34;&#34;
    Add a check-in for a customer at a salon. The sourceID is temporary value generated by a function in the browser normally, but
    here we are using a static value which seems to work fine.

    Args:
        firstname (str): The first name of the customer.
        lastname (str): The last name of the customer.
        phonenumber (str): The phone number of the customer.
        serviceid (str): The ID of the service being availed.
        services (list): A list of services being availed.
        stylistid (str): The ID of the stylist chosen.
        stylistname (str): The name of the stylist chosen.
        time (str): The time of the appointment.
        date (datetime): The date of the appointment.
        emailaddress (str): The email address of the customer.

    Returns:
        checkin_reuslt[Dict[]]: A dict containning the results of the checkin.
        checkin_id(str): A strin containing a unique checkin_id.


    Raises:
        Exception: If there&#39;s an error in the API request.

    This function sends a request to the salon&#39;s booking system to add a check-in with the provided details.
    &#34;&#34;&#34;
    device_uuid = &#34;SC-W-&#34; + self.device_uuid_str
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {
        &#34;firstName&#34;: firstname,
        &#34;lastName&#34;: lastname,
        &#34;phoneNumber&#34;: phonenumber,
        &#34;salonId&#34;: int(self.salon_id),
        &#34;serviceId&#34;: serviceid,
        &#34;services&#34;: services,
        &#34;siteId&#34;: &#34;1&#34;,
        &#34;source&#34;: &#34;SCWEB&#34;,
        &#34;sourceId&#34;: device_uuid,
        &#34;storeAddress&#34;: self.storeaddress,
        &#34;storeName&#34;: self.storename,
        &#34;storePhone&#34;: self.storephone,
        &#34;stylistId&#34;: str(stylistid),
        &#34;stylistName&#34;: stylistname,
        &#34;time&#34;: time,
        &#34;date&#34;: int(datetime.now().strftime(&#34;%Y%m%d&#34;)),
        &#34;profileId&#34;: None,
        &#34;emailAddress&#34;: emailaddress,
        &#34;gender&#34;: 0,
    }
    logging.info(&#34;Checking in&#34;)
    request_url = self.base_regis_booking_api_url + &#34;addcheckin&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        checkin = response.json()
        checkin_result = response.json().get(&#34;apiResult&#34;, None)
        checkin_id = response.json().get(&#34;checkinId&#34;, None)
    except Exception as error:
        logging.error(&#34;Error Checking in %s&#34;, error)
        return None
    return checkin_result, checkin_id</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.cancel_appointment"><code class="name flex">
<span>def <span class="ident">cancel_appointment</span></span>(<span>self, invoice_id)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cancel_appointment(self, invoice_id):
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    payload = {
        &#34;comments&#34;: &#34;Cannot Attend&#34;,
    }
    logging.info(&#34;Cancelling Appointment&#34;)
    request_url = self.zenoti_api_url + f&#34;invoices/{invoice_id}/cancel&#34;
    try:
        response = requests.put(request_url, headers=headers, json=payload)
        response = response.json()
        return response
    except Exception as error:
        logging.error(&#34;Error Cancelling Appointment %s&#34;, error)
        return None</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.cancel_checkin"><code class="name flex">
<span>def <span class="ident">cancel_checkin</span></span>(<span>self, checkinid)</span>
</code></dt>
<dd>
<div class="desc"><p>Cancels a checkin using the api-booking regis API</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>checkinid</code></strong> :&ensp;<code>_type_</code></dt>
<dd><em>description</em></dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>_type_</code></dt>
<dd><em>description</em></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cancel_checkin(self, checkinid):
    &#34;&#34;&#34;Cancels a checkin using the api-booking regis API

    Args:
        checkinid (_type_): _description_

    Returns:
        _type_: _description_
    &#34;&#34;&#34;
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {
        &#34;checkinId&#34;: checkinid,
    }
    logging.info(&#34;Cancelling checkin&#34;)
    request_url = self.base_regis_booking_api_url + &#34;cancelcheckin&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        cancel_checkin = response.json()
    except Exception as error:
        logging.error(&#34;Error Cancelling Checkin %s&#34;, error)
        return None
    return cancel_checkin</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.confirm_selected_slot"><code class="name flex">
<span>def <span class="ident">confirm_selected_slot</span></span>(<span>self, booking_id)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def confirm_selected_slot(self, booking_id):
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    payload = {
        &#34;notes&#34;: &#34;&#34;,
        &#34;group_name&#34;: &#34;&#34;,
    }
    request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/confirm&#34;
    logging.info(&#34;Trying to confirm your slot&#34;)
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        response = response.json()
    except Exception as error:
        logging.error(&#34;Error Confirming Slot %s&#34;, error)
        return None
    return response</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.create_account"><code class="name flex">
<span>def <span class="ident">create_account</span></span>(<span>self, first_name, last_name, phone_number)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_account(self, first_name, last_name, phone_number):
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    payload = {
        &#34;center_id&#34;: self.store_id,
        &#34;personal_info&#34;: {
            &#34;first_name&#34;: first_name,
            &#34;last_name&#34;: last_name,
            &#34;mobile_phone&#34;: {
                &#34;country_code&#34;: 225,  # America
                &#34;number&#34;: phone_number,
            },
            &#34;email&#34;: &#34;&#34;,
            &#34;gender&#34;: -1,
        },
        &#34;preferences&#34;: {
            &#34;receive_transactional_email&#34;: True,  # Get upadtes about your appointment via email
            &#34;receive_transactional_sms&#34;: True,  # Get upadtes about your appointment via sms
            &#34;receive_marketing_email&#34;: False,  # Don&#39;t spam me
            &#34;receive_marketing_sms&#34;: False,  # more spam
        },
    }
    request_url = self.zenoti_api_url + &#34;guests&#34;
    logging.info(&#34;Trying to Create an account&#34;)
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        account = response.json()
    except Exception as error:
        logging.error(&#34;Creating Account %s&#34;, error)
        return None
    return account</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.create_service_booking"><code class="name flex">
<span>def <span class="ident">create_service_booking</span></span>(<span>self, service, stylist, guest_id=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This method expects a service and stylist object.
It will return a unique service ID that can be passed to get_booking_slot
to get an object containing available booking slots for the combination of an service, stylist, and location.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_service_booking(self, service, stylist, guest_id=None):
    &#34;&#34;&#34;This method expects a service and stylist object.
    It will return a unique service ID that can be passed to get_booking_slot
    to get an object containing available booking slots for the combination of an service, stylist, and location.
    &#34;&#34;&#34;
    # This defaults to &#34;next available&#34; if no stylist is defined.
    if not stylist:
        stylist = {}
        stylist[&#34;personal_info&#34;] = {}
        stylist[&#34;personal_info&#34;][&#34;gender&#34;] = &#34;0&#34;
        stylist[&#34;id&#34;] = &#34;&#34;
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    payload = {
        &#34;date&#34;: self.today_date,
        &#34;is_only_catalog_employes&#34;: True,
        &#34;center_id&#34;: self.store_id,
        &#34;guests&#34;: [
            {
                # Guest ID should be set when ready to mark a reservation.
                &#34;id&#34;: guest_id,
                &#34;items&#34;: [
                    {
                        &#34;item&#34;: {&#34;id&#34;: service[&#34;id&#34;]},
                        &#34;therapist&#34;: {
                            &#34;id&#34;: stylist[&#34;id&#34;],
                            &#34;Gender&#34;: stylist[&#34;personal_info&#34;][&#34;gender&#34;],
                        },
                    }
                ],
            }
        ],
    }
    logging.info(&#34;Getting Service booking_id&#34;)
    request_url = self.zenoti_api_url + &#34;bookings&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        booking_id = response.json()
    except Exception as error:
        logging.error(&#34;Error Getting service_id %s&#34;, error)
        return None
    return booking_id</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.find_service_by_name"><code class="name flex">
<span>def <span class="ident">find_service_by_name</span></span>(<span>self, service_name)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def find_service_by_name(self, service_name):
    for service in self.store_services:
        if &#34;catalog_info&#34; in service:
            if (
                service[&#34;catalog_info&#34;][&#34;display_name&#34;].lower()
                == service_name.lower()
            ):
                return service
        else:
            for category in self.store_services:
                for service in category[&#34;services&#34;]:
                    if service[&#34;service&#34;] == service_name:
                        return service[&#34;id&#34;]
            return None
    return None  # If no service found with that name</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.find_stylist_by_name"><code class="name flex">
<span>def <span class="ident">find_stylist_by_name</span></span>(<span>self, stylist_name)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def find_stylist_by_name(self, stylist_name):
    for stylist in self.therapists:
        if &#34;personal_info&#34; in stylist:
            if (
                stylist[&#34;personal_info&#34;][&#34;first_name&#34;].lower()
                == stylist_name.lower()
            ):
                return stylist
        else:
            stylist[&#34;name&#34;].lower() == stylist_name.lower()
            return stylist
    return None  # If no stylist found with that name</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_appointments"><code class="name flex">
<span>def <span class="ident">get_appointments</span></span>(<span>self, guest_id, start_date=None, end_date=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_appointments(self, guest_id, start_date=None, end_date=None):
    if start_date is None:
        start_date = self.today_date
    if end_date is None:
        end_date = self.today_date
    params = {
        &#34;start_date&#34;: start_date,
        &#34;end_date&#34;: end_date,
    }
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    logging.info(&#34;Retriving Guest Appointments&#34;)
    request_url = self.zenoti_api_url + f&#34;guests/{guest_id}/appointments&#34;
    try:
        response = requests.get(request_url, headers=headers, params=params)
        appointments = response.json()
        if len(appointments[&#34;appointments&#34;]) &lt; 1:
            # print(&#34;No guest appointments returned&#34;)
            return {}
        return appointments[&#34;appointments&#34;]
    except Exception as error:
        logging.error(&#34;Error Getting Guest Appointments %s&#34;, error)
        return None</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_attendance"><code class="name flex">
<span>def <span class="ident">get_attendance</span></span>(<span>self, name)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_attendance(self, name):
    for person in self.therapists:
        # check if the name key is present
        if person[&#34;personal_info&#34;][&#34;name&#34;].lower() == name.lower():
            employee_id = person[&#34;id&#34;]
    params = {
        &#34;center_id&#34;: self.store_id,
        &#34;start_date&#34;: self.today_date,
        &#34;end_date&#34;: self.today_date,
    }
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    logging.info(&#34;Getting Therapist Attendance&#34;)
    request_url = self.zenoti_api_url + f&#34;employees/{employee_id}/attendance&#34;
    try:
        response = requests.get(request_url, headers=headers, params=params)
        self.attendance = response.json().get(&#34;attendance&#34;, None)
        self.attendance_total = response.json().get(&#34;total_records&#34;, None)
    except Exception as error:
        logging.error(&#34;Error Geting Store Therapist Attendance %s&#34;, error)
        return None
    return self.attendance, self.attendance_total</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_availability_of_salon"><code class="name flex">
<span>def <span class="ident">get_availability_of_salon</span></span>(<span>self, serviceid:str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_availability_of_salon(self, serviceid: str):
    # Handle a non-zenoti type store
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {
        &#34;salonId&#34;: self.salon_id,
        &#34;serviceIds&#34;: serviceid,
        &#34;siteId&#34;: &#34;1&#34;,
        &#34;date&#34;: datetime.now().strftime(&#34;%Y%m%d&#34;),
    }
    logging.info(&#34;Getting Salon Availability&#34;)
    request_url = self.base_regis_booking_api_url + &#34;getavailabilityofsalon&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        self.availability = response.json()
    except Exception as error:
        logging.error(&#34;Error Geting Store availability %s&#34;, error)
        return None
    return self.availability</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_booking_slot"><code class="name flex">
<span>def <span class="ident">get_booking_slot</span></span>(<span>self, slot_id)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_booking_slot(self, slot_id):
    slot_id = slot_id[&#34;id&#34;]
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    logging.info(&#34;Getting Booking Slot&#34;)
    request_url = self.zenoti_api_url + f&#34;bookings/{slot_id}/slots&#34;
    try:
        response = requests.get(request_url, headers=headers)
        booking_slots = response.json()
        if len(booking_slots[&#34;slots&#34;]) &lt; 1:
            print(&#34;No Booking slots available for the time and stylist requested&#34;)
            booking_slots = 0
            return {}
        return booking_slots
    except Exception as error:
        logging.error(&#34;Error Getting booking_slots %s&#34;, error)
        return None</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_check_in_by_source"><code class="name flex">
<span>def <span class="ident">get_check_in_by_source</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_check_in_by_source(self):
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {
        &#34;sourceId&#34;: &#34;SC-W-&#34; + self.device_uuid_str,
        &#34;profileId&#34;: None,
    }
    logging.info(&#34;Getting Checkins&#34;)
    request_url = self.base_regis_booking_api_url + &#34;getcheckinbysource&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        checkins = response.json()
    except Exception as error:
        logging.error(&#34;Error Geting Checkins %s&#34;, error)
        return None
    return checkins</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_salon"><code class="name flex">
<span>def <span class="ident">get_salon</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieve salon information using its unique identifier and set essential details.</p>
<p>This method makes an API request to retrieve salon information, including the Zenoti API key, store ID, and POS type, using the salon's unique identifier.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>A tuple containing the Zenoti API key, store ID, and POS type if the request is successful, otherwise None.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_salon(self):
    &#34;&#34;&#34;
    Retrieve salon information using its unique identifier and set essential details.

    This method makes an API request to retrieve salon information, including the Zenoti API key, store ID, and POS type, using the salon&#39;s unique identifier.

    Returns:
        tuple: A tuple containing the Zenoti API key, store ID, and POS type if the request is successful, otherwise None.
    &#34;&#34;&#34;
    headers = {
        &#34;Authorization&#34;: self.regis_api_key,
    }
    params = {&#34;salon-number&#34;: self.salon_id}
    logging.info(&#34;Getting Zenoti API Key&#34;)
    request_url = self.base_regis_api_url + &#34;/sis/api/salon?&#34; + self.salon_id
    try:
        response = requests.get(request_url, headers=headers, params=params)
        self.zenoti_api_key = response.json().get(&#34;zenoti_api_key&#34;, None)
        self.store_id = response.json().get(&#34;zenoti_id&#34;, None)
        self.pos_type = response.json().get(&#34;pos_type&#34;, None)
        self.storeaddress = response.json().get(&#34;address2&#34;, None)
        self.storename = response.json().get(&#34;name&#34;, None)
        self.storephone = response.json().get(&#34;phone_number&#34;, None)
    except Exception as error:
        logging.error(&#34;Error getting Zenoti API Key %s&#34;, error)
        return None
    # Get some additonal info if this is a differnet POS system
    if self.pos_type.lower() != &#34;zenoti&#34;:
        headers = {
            &#34;x-api-key&#34;: self.regis_api_booking_key,
        }
        payload = {
            &#34;salonId&#34;: self.salon_id,
            &#34;siteId&#34;: &#34;1&#34;,
        }
        logging.info(&#34;Getting Store Details&#34;)
        request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
        try:
            response = requests.post(request_url, headers=headers, json=payload)
            response = response.json()
            self.storeaddress = response[&#34;Salon&#34;][&#34;address&#34;]
            self.storename = response[&#34;Salon&#34;][&#34;name&#34;]
            self.storephone = response[&#34;Salon&#34;][&#34;phonenumber&#34;]
            self.storephone = self.storephone.replace(&#34;-&#34;, &#34;&#34;)
        except Exception as error:
            logging.error(&#34;Error Store Details %s&#34;, error)
            return None</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_salon_services"><code class="name flex">
<span>def <span class="ident">get_salon_services</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieve salon services</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_salon_services(self):
    &#34;&#34;&#34;
    Retrieve salon services

    &#34;&#34;&#34;
    if self.pos_type.lower() == &#34;zenoti&#34;:
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Salon Services&#34;)
        request_url = (
            self.zenoti_api_url
            + f&#34;centers/{self.store_id}/services?catalog_enabled=true&amp;expand=additional_info&amp;expand=catalog_info&amp;size=100&amp;0=us&#34;
        )
        try:
            response = requests.get(request_url, headers=headers)
            self.store_services = response.json().get(&#34;services&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store Services %s&#34;, error)
            return None
        return self.store_services
    # Handle a non-zenoti type store
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
    logging.info(&#34;Getting Salon Services&#34;)
    request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        self.store_services = response.json().get(&#34;Services&#34;, None)
    except Exception as error:
        logging.error(&#34;Error Geting Store Services %s&#34;, error)
        return None
    return self.store_services</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.get_therapists_working"><code class="name flex">
<span>def <span class="ident">get_therapists_working</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_therapists_working(self):
    if self.pos_type.lower() == &#34;zenoti&#34;:
        params = {&#34;date&#34;: self.today_date}
        headers = {
            &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
        }
        logging.info(&#34;Getting Salon Therapists&#34;)
        request_url = self.zenoti_api_url + f&#34;centers/{self.store_id}/therapists&#34;
        try:
            response = requests.get(request_url, headers=headers, params=params)
            self.therapists = response.json().get(&#34;therapists&#34;, None)
        except Exception as error:
            logging.error(&#34;Error Geting Store therapists %s&#34;, error)
            return None
        return self.therapists
    # Handle a non-zenoti type store
    headers = {
        &#34;x-api-key&#34;: self.regis_api_booking_key,
    }
    payload = {&#34;salonId&#34;: self.salon_id, &#34;siteId&#34;: 1}
    logging.info(&#34;Getting Salon Stylists&#34;)
    request_url = self.base_regis_booking_api_url + &#34;getsalondetails&#34;
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        self.therapists = response.json().get(&#34;Stylists&#34;, None)
    except Exception as error:
        logging.error(&#34;Error Geting Store Stylists %s&#34;, error)
        return None
    return self.therapists</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.reserve_selected_slot"><code class="name flex">
<span>def <span class="ident">reserve_selected_slot</span></span>(<span>self, selected_slot, booking_id)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reserve_selected_slot(self, selected_slot, booking_id):
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    payload = {&#34;slot_time&#34;: selected_slot[&#34;Time&#34;]}
    request_url = self.zenoti_api_url + f&#34;bookings/{booking_id[&#39;id&#39;]}/slots/reserve&#34;
    logging.info(&#34;Trying to reserve your slot&#34;)
    try:
        response = requests.post(request_url, json=payload, headers=headers)
        response = response.json()
    except Exception as error:
        logging.error(&#34;Error Reserving Slot %s&#34;, error)
        return None
    return response</code></pre>
</details>
</dd>
<dt id="openCuts.opencuts.RegisSalon.retrive_guest_detail"><code class="name flex">
<span>def <span class="ident">retrive_guest_detail</span></span>(<span>self, first_name=None, last_name=None, phone=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def retrive_guest_detail(self, first_name=None, last_name=None, phone=None):
    params = {
        &#34;center_id&#34;: self.store_id,
        &#34;first_name&#34;: first_name,
        &#34;last_name&#34;: last_name,
        &#34;phone&#34;: phone,
    }
    headers = {
        &#34;Authorization&#34;: &#34;apikey &#34; + self.zenoti_api_key,
    }
    logging.info(&#34;Retriving Guest Detail&#34;)
    request_url = self.zenoti_api_url + &#34;guests/search&#34;
    try:
        response = requests.get(request_url, headers=headers, params=params)
        guest = response.json()
        if len(guest[&#34;guests&#34;]) &lt; 1:
            print(&#34;No guest records returned&#34;)
            return {}
        return guest[&#34;guests&#34;][
            -1
        ]  # Sometimes guests have multiple records so just return the latest one
    except Exception as error:
        logging.error(&#34;Error Getting Guest Detail %s&#34;, error)
        return None</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="openCuts" href="index.html">openCuts</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="openCuts.opencuts.RegisSalon" href="#openCuts.opencuts.RegisSalon">RegisSalon</a></code></h4>
<ul class="">
<li><code><a title="openCuts.opencuts.RegisSalon.add_check_in" href="#openCuts.opencuts.RegisSalon.add_check_in">add_check_in</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.cancel_appointment" href="#openCuts.opencuts.RegisSalon.cancel_appointment">cancel_appointment</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.cancel_checkin" href="#openCuts.opencuts.RegisSalon.cancel_checkin">cancel_checkin</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.confirm_selected_slot" href="#openCuts.opencuts.RegisSalon.confirm_selected_slot">confirm_selected_slot</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.create_account" href="#openCuts.opencuts.RegisSalon.create_account">create_account</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.create_service_booking" href="#openCuts.opencuts.RegisSalon.create_service_booking">create_service_booking</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.find_service_by_name" href="#openCuts.opencuts.RegisSalon.find_service_by_name">find_service_by_name</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.find_stylist_by_name" href="#openCuts.opencuts.RegisSalon.find_stylist_by_name">find_stylist_by_name</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_appointments" href="#openCuts.opencuts.RegisSalon.get_appointments">get_appointments</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_attendance" href="#openCuts.opencuts.RegisSalon.get_attendance">get_attendance</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_availability_of_salon" href="#openCuts.opencuts.RegisSalon.get_availability_of_salon">get_availability_of_salon</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_booking_slot" href="#openCuts.opencuts.RegisSalon.get_booking_slot">get_booking_slot</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_check_in_by_source" href="#openCuts.opencuts.RegisSalon.get_check_in_by_source">get_check_in_by_source</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_salon" href="#openCuts.opencuts.RegisSalon.get_salon">get_salon</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_salon_services" href="#openCuts.opencuts.RegisSalon.get_salon_services">get_salon_services</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.get_therapists_working" href="#openCuts.opencuts.RegisSalon.get_therapists_working">get_therapists_working</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.reserve_selected_slot" href="#openCuts.opencuts.RegisSalon.reserve_selected_slot">reserve_selected_slot</a></code></li>
<li><code><a title="openCuts.opencuts.RegisSalon.retrive_guest_detail" href="#openCuts.opencuts.RegisSalon.retrive_guest_detail">retrive_guest_detail</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>